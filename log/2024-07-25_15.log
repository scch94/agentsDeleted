[2024-07-25 15:16:37.912] [Gconfiguration] [] [info] [] ending to get the configuration
[2024-07-25 15:16:37.913] [Gconfiguration] [] [trace] [] this is the data that we have in the configuration {"log_level":"trace","log_name":"agentsDeleted_","database_connection_string":"postgres://xxepin:migracion@digicel-dev-flex.postgres.database.azure.com:5432/xxepin?sslmode=require","tenant":4,"ubication_agents_file":"../utils/agents.txt"}
[2024-07-25 15:16:38.802] [agentsdeleter] [databaseConnection] [info] [] connected to postgres database
[2024-07-25 15:16:38.802] [agentsdeleter] [fileReader] [info] [] starting to get the agents  ubication of the file is ../utils/agents.txt
[2024-07-25 15:16:38.804] [agentsdeleter] [main] [info] [] number of agents are 1
[2024-07-25 15:16:38.805] [agentsdeleter] [controller] [info] [] starting to create the script to delete agents_mobile
[2024-07-25 15:16:38.805] [agentsdeleter] [controller] [trace] [] starting to get agents_msisdn info
[2024-07-25 15:16:38.806] [agentsdeleter] [database] [trace] [] starting to get the msisdn por the agent with id :996008814317
[2024-07-25 15:16:38.807] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT AM.OID, A.OID, MSISDN FROM agent A INNER JOIN agent_mobile AM ON AM.AGENT_OID=A.OID INNER JOIN account ACC ON ACC.AGENT_OID = A.OID WHERE A.AGENT_ID=$1 AND A.TENANT_OID=$2 and the params: agentID=996008814317, and tenant_oid=4
[2024-07-25 15:16:39.871] [agentsdeleter] [database] [error] [] error scanning row: sql: expected 3 destination arguments in Scan, not 4
[2024-07-25 15:16:39.872] [agentsdeleter] [controller] [error] [] error in getmsisdn: sql: expected 3 destination arguments in Scan, not 4
[2024-07-25 15:16:39.872] [agentsdeleter] [controller] [error] [] error on the function getAgentsInfo() err: sql: expected 3 destination arguments in Scan, not 4
[2024-07-25 15:16:39.872] [agentsdeleter] [main] [error] [] error creating the script to delete the msisdns of the agents: sql: expected 3 destination arguments in Scan, not 4
[2024-07-25 15:17:30.524] [Gconfiguration] [] [info] [] ending to get the configuration
[2024-07-25 15:17:30.524] [Gconfiguration] [] [trace] [] this is the data that we have in the configuration {"log_level":"trace","log_name":"agentsDeleted_","database_connection_string":"postgres://xxepin:migracion@digicel-dev-flex.postgres.database.azure.com:5432/xxepin?sslmode=require","tenant":4,"ubication_agents_file":"../utils/agents.txt"}
[2024-07-25 15:17:31.402] [agentsdeleter] [databaseConnection] [info] [] connected to postgres database
[2024-07-25 15:17:31.402] [agentsdeleter] [fileReader] [info] [] starting to get the agents  ubication of the file is ../utils/agents.txt
[2024-07-25 15:17:31.404] [agentsdeleter] [main] [info] [] number of agents are 1
[2024-07-25 15:17:31.404] [agentsdeleter] [controller] [info] [] starting to create the script to delete agents_mobile
[2024-07-25 15:17:31.405] [agentsdeleter] [controller] [trace] [] starting to get agents_msisdn info
[2024-07-25 15:17:31.406] [agentsdeleter] [database] [trace] [] starting to get the msisdn por the agent with id :996008814317
[2024-07-25 15:17:31.406] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT AM.OID, A.OID, MSISDN ACC.CREDIT FROM agent A INNER JOIN agent_mobile AM ON AM.AGENT_OID=A.OID INNER JOIN account ACC ON ACC.AGENT_OID = A.OID WHERE A.AGENT_ID=$1 AND A.TENANT_OID=$2 and the params: agentID=996008814317, and tenant_oid=4
[2024-07-25 15:17:32.075] [agentsdeleter] [database] [error] [] query error pq: syntax error at or near "."
[2024-07-25 15:17:32.075] [agentsdeleter] [controller] [error] [] error in getmsisdn: pq: syntax error at or near "."
[2024-07-25 15:17:32.076] [agentsdeleter] [controller] [error] [] error on the function getAgentsInfo() err: pq: syntax error at or near "."
[2024-07-25 15:17:32.076] [agentsdeleter] [main] [error] [] error creating the script to delete the msisdns of the agents: pq: syntax error at or near "."
[2024-07-25 15:17:52.165] [Gconfiguration] [] [info] [] ending to get the configuration
[2024-07-25 15:17:52.166] [Gconfiguration] [] [trace] [] this is the data that we have in the configuration {"log_level":"trace","log_name":"agentsDeleted_","database_connection_string":"postgres://xxepin:migracion@digicel-dev-flex.postgres.database.azure.com:5432/xxepin?sslmode=require","tenant":4,"ubication_agents_file":"../utils/agents.txt"}
[2024-07-25 15:17:52.986] [agentsdeleter] [databaseConnection] [info] [] connected to postgres database
[2024-07-25 15:17:52.986] [agentsdeleter] [fileReader] [info] [] starting to get the agents  ubication of the file is ../utils/agents.txt
[2024-07-25 15:17:52.988] [agentsdeleter] [main] [info] [] number of agents are 1
[2024-07-25 15:17:52.988] [agentsdeleter] [controller] [info] [] starting to create the script to delete agents_mobile
[2024-07-25 15:17:52.988] [agentsdeleter] [controller] [trace] [] starting to get agents_msisdn info
[2024-07-25 15:17:52.989] [agentsdeleter] [database] [trace] [] starting to get the msisdn por the agent with id :996008814317
[2024-07-25 15:17:52.989] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT AM.OID, A.OID, MSISDN, ACC.CREDIT FROM agent A INNER JOIN agent_mobile AM ON AM.AGENT_OID=A.OID INNER JOIN account ACC ON ACC.AGENT_OID = A.OID WHERE A.AGENT_ID=$1 AND A.TENANT_OID=$2 and the params: agentID=996008814317, and tenant_oid=4
[2024-07-25 15:17:53.764] [agentsdeleter] [database] [info] [] the query in the database tooks: 774.6419ms
[2024-07-25 15:17:53.764] [agentsdeleter] [controller] [trace] [] the agent with id 996008814317 has 1 moviles
[2024-07-25 15:17:53.765] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table agent_mobile_pin
[2024-07-25 15:17:53.766] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/agent_mobile_scripts.txt
[2024-07-25 15:17:53.772] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:17:53.772] [agentsdeleter] [controller] [info] [] query to delete agent mobile pin was created and writed
[2024-07-25 15:17:53.773] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table agent_mobile
[2024-07-25 15:17:53.773] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/agent_mobile_scripts.txt
[2024-07-25 15:17:53.774] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:17:53.774] [agentsdeleter] [controller] [info] [] query to delete agent mobile was created and writed
[2024-07-25 15:17:53.775] [agentsdeleter] [controller] [info] [] starting to create the script to delete Users vinculated to the agents in the list
[2024-07-25 15:17:53.775] [agentsdeleter] [controller] [trace] [] starting to get users
[2024-07-25 15:17:53.776] [agentsdeleter] [database] [trace] [] starting to get the Users por the agent with oid :113272
[2024-07-25 15:17:53.776] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT ua.oid, ua.user_id, cu.client_oid FROM user_adm ua JOIN client_user cu ON ua.oid = cu.user_oid WHERE cu.client_oid = $1 AND cu.tenant_oid=$2 and the params: agentID=113272, and tenant_oid=%!s(int=4)
[2024-07-25 15:17:54.506] [agentsdeleter] [database] [info] [] the query in the database tooks: 729.8156ms
[2024-07-25 15:17:54.507] [agentsdeleter] [database] [trace] [] starting to check if the user testing_ky3 can be deleted :%!v(MISSING)
[2024-07-25 15:17:54.507] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30520, and tenant_oid=30520%!(EXTRA int=4)
[2024-07-25 15:17:55.261] [agentsdeleter] [database] [info] [] User testing_ky3 is not a parent and can be deleted
[2024-07-25 15:17:55.261] [agentsdeleter] [database] [info] [] the query in the database tooks: 754.2805ms
[2024-07-25 15:17:55.262] [agentsdeleter] [database] [trace] [] starting to check if the user testin231321 can be deleted :%!v(MISSING)
[2024-07-25 15:17:55.262] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30521, and tenant_oid=30521%!(EXTRA int=4)
[2024-07-25 15:17:55.992] [agentsdeleter] [database] [info] [] User testin231321 is not a parent and can be deleted
[2024-07-25 15:17:55.992] [agentsdeleter] [database] [info] [] the query in the database tooks: 730.2453ms
[2024-07-25 15:17:55.992] [agentsdeleter] [database] [trace] [] starting to check if the user testing-subdis can be deleted :%!v(MISSING)
[2024-07-25 15:17:55.992] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30360, and tenant_oid=30360%!(EXTRA int=4)
[2024-07-25 15:17:56.722] [agentsdeleter] [database] [info] [] User testing-subdis is not a parent and can be deleted
[2024-07-25 15:17:56.722] [agentsdeleter] [database] [info] [] the query in the database tooks: 729.3602ms
[2024-07-25 15:17:56.722] [agentsdeleter] [database] [trace] [] starting to check if the user subdistributor_KY can be deleted :%!v(MISSING)
[2024-07-25 15:17:56.722] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30380, and tenant_oid=30380%!(EXTRA int=4)
[2024-07-25 15:17:57.514] [agentsdeleter] [database] [info] [] User subdistributor_KY is a parent and cannot be deleted
[2024-07-25 15:17:57.515] [agentsdeleter] [database] [info] [] the query in the database tooks: 792.9105ms
[2024-07-25 15:17:57.515] [agentsdeleter] [controller] [trace] [] the agent with id 996008814317 has 4 users
[2024-07-25 15:17:57.517] [agentsdeleter] [controller] [info] [] usuarios : [{30520 testing_ky3 113272 {true User testing_ky3 is not a parent and can be deleted}} {30521 testin231321 113272 {true User testin231321 is not a parent and can be deleted}} {30360 testing-subdis 113272 {true User testing-subdis is not a parent and can be deleted}} {30380 subdistributor_KY 113272 {false User subdistributor_KY is a parent and cannot be deleted}}] agentes &[{996008814317 113272 9999402.460000 {false agent whit id 996008814317, can not deleted reasons : User subdistributor_KY is a parent and cannot be deleted.}}]
[2024-07-25 15:17:57.517] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table old_password
[2024-07-25 15:17:57.517] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/users.txt
[2024-07-25 15:17:57.518] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:17:57.519] [agentsdeleter] [controller] [info] [] query to delete users_old_password was created and writed
[2024-07-25 15:17:57.519] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table client_user
[2024-07-25 15:17:57.519] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/users.txt
[2024-07-25 15:17:57.520] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:17:57.521] [agentsdeleter] [controller] [info] [] query to delete ClientUser was created and writed
[2024-07-25 15:17:57.521] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table user_adm
[2024-07-25 15:17:57.521] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/users.txt
[2024-07-25 15:17:57.522] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:17:57.523] [agentsdeleter] [controller] [info] [] query to delete user_adm was created and writed
[2024-07-25 15:17:57.523] [agentsdeleter] [controller] [info] [] starting to create the script to delete agents : &[{996008814317 113272 9999402.460000 {false agent whit id 996008814317, can not deleted reasons : User subdistributor_KY is a parent and cannot be deleted.}}]
[2024-07-25 15:17:57.523] [agentsdeleter] [controller] [trace] [] checking if the agents have a credit different than 0
[2024-07-25 15:17:57.523] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../utils/conclusions.txt
[2024-07-25 15:17:57.524] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:17:57.525] [agentsdeleter] [controller] [info] [] conclusion file was created 
[2024-07-25 15:29:04.291] [Gconfiguration] [] [info] [] ending to get the configuration
[2024-07-25 15:29:04.292] [Gconfiguration] [] [trace] [] this is the data that we have in the configuration {"log_level":"trace","log_name":"agentsDeleted_","database_connection_string":"postgres://xxepin:migracion@digicel-dev-flex.postgres.database.azure.com:5432/xxepin?sslmode=require","tenant":4,"ubication_agents_file":"../utils/agents.txt"}
[2024-07-25 15:29:05.261] [agentsdeleter] [databaseConnection] [info] [] connected to postgres database
[2024-07-25 15:29:05.261] [agentsdeleter] [fileReader] [info] [] starting to get the agents  ubication of the file is ../utils/agents.txt
[2024-07-25 15:29:05.263] [agentsdeleter] [main] [info] [] number of agents are 1
[2024-07-25 15:29:05.263] [agentsdeleter] [controller] [info] [] starting to create the script to delete agents_mobile
[2024-07-25 15:29:05.264] [agentsdeleter] [controller] [trace] [] starting to get agents_msisdn info
[2024-07-25 15:29:05.265] [agentsdeleter] [database] [trace] [] starting to get the msisdn por the agent with id :996008814317
[2024-07-25 15:29:05.265] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT AM.OID, A.OID, MSISDN, ACC.CREDIT FROM agent A INNER JOIN agent_mobile AM ON AM.AGENT_OID=A.OID INNER JOIN account ACC ON ACC.AGENT_OID = A.OID WHERE A.AGENT_ID=$1 AND A.TENANT_OID=$2 and the params: agentID=996008814317, and tenant_oid=4
[2024-07-25 15:29:06.009] [agentsdeleter] [database] [info] [] the query in the database tooks: 744.0093ms
[2024-07-25 15:29:06.010] [agentsdeleter] [controller] [trace] [] the agent with id 996008814317 has 1 moviles
[2024-07-25 15:29:06.011] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table agent_mobile_pin
[2024-07-25 15:29:06.011] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/agent_mobile_scripts.txt
[2024-07-25 15:29:06.013] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:29:06.013] [agentsdeleter] [controller] [info] [] query to delete agent mobile pin was created and writed
[2024-07-25 15:29:06.013] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table agent_mobile
[2024-07-25 15:29:06.013] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/agent_mobile_scripts.txt
[2024-07-25 15:29:06.014] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:29:06.014] [agentsdeleter] [controller] [info] [] query to delete agent mobile was created and writed
[2024-07-25 15:29:06.015] [agentsdeleter] [controller] [info] [] starting to create the script to delete Users vinculated to the agents in the list
[2024-07-25 15:29:06.015] [agentsdeleter] [controller] [trace] [] starting to get users
[2024-07-25 15:29:06.015] [agentsdeleter] [database] [trace] [] starting to get the Users por the agent with oid :113272
[2024-07-25 15:29:06.016] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT ua.oid, ua.user_id, cu.client_oid FROM user_adm ua JOIN client_user cu ON ua.oid = cu.user_oid WHERE cu.client_oid = $1 AND cu.tenant_oid=$2 and the params: agentID=113272, and tenant_oid=%!s(int=4)
[2024-07-25 15:29:06.798] [agentsdeleter] [database] [info] [] the query in the database tooks: 782.4201ms
[2024-07-25 15:29:06.799] [agentsdeleter] [database] [trace] [] starting to check if the user testing_ky3 can be deleted :%!v(MISSING)
[2024-07-25 15:29:06.799] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30520, and tenant_oid=30520%!(EXTRA int=4)
[2024-07-25 15:29:07.577] [agentsdeleter] [database] [info] [] User testing_ky3 is not a parent and can be deleted
[2024-07-25 15:29:07.578] [agentsdeleter] [database] [info] [] the query in the database tooks: 779.3262ms
[2024-07-25 15:29:07.578] [agentsdeleter] [database] [trace] [] starting to check if the user testin231321 can be deleted :%!v(MISSING)
[2024-07-25 15:29:07.578] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30521, and tenant_oid=30521%!(EXTRA int=4)
[2024-07-25 15:29:08.423] [agentsdeleter] [database] [info] [] User testin231321 is not a parent and can be deleted
[2024-07-25 15:29:08.423] [agentsdeleter] [database] [info] [] the query in the database tooks: 844.8952ms
[2024-07-25 15:29:08.423] [agentsdeleter] [database] [trace] [] starting to check if the user testing-subdis can be deleted :%!v(MISSING)
[2024-07-25 15:29:08.423] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30360, and tenant_oid=30360%!(EXTRA int=4)
[2024-07-25 15:29:09.171] [agentsdeleter] [database] [info] [] User testing-subdis is not a parent and can be deleted
[2024-07-25 15:29:09.171] [agentsdeleter] [database] [info] [] the query in the database tooks: 747.2489ms
[2024-07-25 15:29:09.171] [agentsdeleter] [database] [trace] [] starting to check if the user subdistributor_KY can be deleted :%!v(MISSING)
[2024-07-25 15:29:09.171] [agentsdeleter] [database] [trace] [] this is the QUERY: SELECT * FROM user_Adm WHERE (user_parent_oid = $1 OR view_user_parent_oid = $2 ) and tenant_oid= $3  and the params: agentID=30380, and tenant_oid=30380%!(EXTRA int=4)
[2024-07-25 15:29:09.922] [agentsdeleter] [database] [info] [] User subdistributor_KY is a parent and cannot be deleted
[2024-07-25 15:29:09.923] [agentsdeleter] [database] [info] [] the query in the database tooks: 751.3481ms
[2024-07-25 15:29:09.923] [agentsdeleter] [controller] [trace] [] the agent with id 996008814317 has 4 users
[2024-07-25 15:29:09.930] [agentsdeleter] [controller] [info] [] usuarios : [{30520 testing_ky3 113272 {true User testing_ky3 is not a parent and can be deleted}} {30521 testin231321 113272 {true User testin231321 is not a parent and can be deleted}} {30360 testing-subdis 113272 {true User testing-subdis is not a parent and can be deleted}} {30380 subdistributor_KY 113272 {false User subdistributor_KY is a parent and cannot be deleted}}] agentes &[{996008814317 113272 9999402.460000 {false agent whit id 996008814317, can not deleted reasons : User subdistributor_KY is a parent and cannot be deleted.}}]
[2024-07-25 15:29:09.930] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table old_password
[2024-07-25 15:29:09.930] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/users.txt
[2024-07-25 15:29:09.932] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:29:09.933] [agentsdeleter] [controller] [info] [] query to delete users_old_password was created and writed
[2024-07-25 15:29:09.933] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table client_user
[2024-07-25 15:29:09.933] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/users.txt
[2024-07-25 15:29:09.935] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:29:09.936] [agentsdeleter] [controller] [info] [] query to delete ClientUser was created and writed
[2024-07-25 15:29:09.936] [agentsdeleter] [queryBuilder] [info] [] starting to create a query to delete data to the table user_adm
[2024-07-25 15:29:09.936] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../scripts/users.txt
[2024-07-25 15:29:09.938] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:29:09.938] [agentsdeleter] [controller] [info] [] query to delete user_adm was created and writed
[2024-07-25 15:29:09.939] [agentsdeleter] [controller] [info] [] starting to create the script to delete agents 
[2024-07-25 15:29:09.939] [agentsdeleter] [controller] [trace] [] checking if the agents have a credit different than 0
[2024-07-25 15:29:09.939] [agentsdeleter] [fileWriter] [info] [] starting to write in the file ../utils/conclusions.txt
[2024-07-25 15:29:09.941] [agentsdeleter] [fileWriter] [trace] [] end to wrtite in a file: 
[2024-07-25 15:29:09.941] [agentsdeleter] [controller] [info] [] conclusion file was created 
